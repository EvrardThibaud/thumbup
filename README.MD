````markdown
# ThumbUp üé®üìä

ThumbUp est un outil interne pour g√©rer des **commandes de miniatures YouTube** pour des clients (YouTubeurs) :
- Les **admins** g√®rent les clients, les commandes, le temps pass√©, les paiements‚Ä¶
- Les **clients** peuvent cr√©er des commandes, uploader des assets, suivre le statut et r√©cup√©rer leurs miniatures.

> üíª Version actuelle : projet surtout pens√© pour un **rendu scolaire**.  
> üîó D√©mo en production : https://thumb-up.byevti.com/  
> ‚ö†Ô∏è En prod, **la confirmation d‚Äôemail ne fonctionne pas encore** pour la cr√©ation de compte (les mails ne partent pas).

---

## üß± Stack technique

- **PHP** ‚â• 8.2
- **Symfony** 7+
- **Doctrine ORM**
- **Twig** (pas de front SPA, que du serveur-side)
- **SQLite** en d√©veloppement (plus simple √† lancer)
- **MariaDB/MySQL** en production
- Bundles principaux :
  - symfony/security-bundle
  - symfony/ux (Stimulus, Turbo, Autocomplete, Chart.js)
  - doctrine/doctrine-bundle, doctrine/migrations-bundle
  - liip/imagine-bundle (pr√©visualisation des images)
  - vich/uploader-bundle (upload de fichiers)

---

## ‚öôÔ∏è Fonctionnalit√©s principales

- Gestion des **Users** (ROLE_ADMIN / ROLE_CLIENT) et des **Clients**
- Gestion des **Orders** (commandes de miniatures) avec statut (CREATED, ACCEPTED, DOING, DELIVERED, REVISION, FINISHED‚Ä¶)
- Upload d‚Äô**assets client** (OrderAsset) et de **miniatures finales** (Thumbnail)
- Suivi du **temps pass√©** par commande (TimeEntry)
- Suivi basique des **paiements** (Payment)
- Invitations clients via **token** pour cr√©er un compte li√© √† un Client
- Dashboard admin / client (statuts, derni√®res miniatures, etc.)

---

## üöÄ Lancer le projet en d√©veloppement

### 1. Cloner le d√©p√¥t

```bash
git clone <URL_DU_REPO> thumbup
cd thumbup
````

### 2. Installer les d√©pendances PHP

```bash
composer install
```

En dev, les d√©pendances de debug (profiler, maker, fixtures‚Ä¶) sont install√©es.

### 3. Configurer l‚Äôenvironnement

Par d√©faut, le projet utilise **SQLite en d√©veloppement**.
V√©rifie que dans `.env` ou `.env.local` tu as quelque chose de ce genre :

```env
DATABASE_URL="sqlite:///%kernel.project_dir%/var/data.db"
```

(Si tu utilises un autre DSN, adapte les commandes de DB en cons√©quence.)

### 4. G√©n√©rer le sch√©ma + migrations

Si tu veux utiliser les migrations :

```bash
php bin/console doctrine:database:create
php bin/console doctrine:migrations:migrate
```

Avec SQLite, la DB sera cr√©√©e automatiquement dans `var/`.

### 5. Charger les DataFixtures

Les fixtures cr√©ent notamment un compte admin de test.

```bash
php bin/console doctrine:fixtures:load
```

> Identifiants admin cr√©√©s par les fixtures :
>
> * **Email** : `admin@example.com`
> * **Mot de passe** : `adminpass`

### 6. Lancer le serveur de dev

Avec la CLI Symfony (recommand√©) :

```bash
symfony server:start
```

Ou avec PHP natif :

```bash
php -S 127.0.0.1:8000 -t public
```

Le site sera alors accessible sur :
üëâ [http://127.0.0.1:8000](http://127.0.0.1:8000)

---

## üîë Acc√®s & r√¥les

### Compte admin (fixtures)

Utilise ces identifiants en dev :

* Email : `admin@example.com`
* Mot de passe : `adminpass`

L‚Äôadmin peut :

* voir tous les clients et leurs commandes
* cr√©er / √©diter les commandes
* uploader les miniatures finales
* consulter les paiements / time entries
* g√©rer les utilisateurs

### Comptes clients

En dev, les fixtures peuvent aussi cr√©er des **clients** et des **users ROLE_CLIENT** (selon configuration actuelle des fixtures).
Sinon, un admin peut cr√©er un Client et un User depuis le back-office.

---

## üåê Environnement de production

* URL : [https://thumb-up.byevti.com/](https://thumb-up.byevti.com/)
* Base de donn√©es : **MariaDB** (configur√©e via `DATABASE_URL` c√¥t√© Infomaniak)
* PHP : 8.3

Limitations actuelles en prod (important pour le rendu scolaire) :

* La **confirmation d‚Äôemail** lors de l‚Äôinscription ne fonctionne pas encore (probl√®me de configuration d‚Äôenvoi de mails).
* Le reste du site (auth, back-office, cr√©ation d‚Äôorders, upload de fichiers‚Ä¶) est fonctionnel.

---

## üß™ Quelques commandes utiles

Recr√©er le sch√©ma √† partir des entit√©s (en dev uniquement, √† manipuler avec pr√©caution) :

```bash
php bin/console doctrine:schema:update --force
```

Voir les migrations disponibles :

```bash
php bin/console doctrine:migrations:list
```

G√©n√©rer une nouvelle migration apr√®s modification des entit√©s :

```bash
php bin/console doctrine:migrations:diff
```

---

## üìÅ Structure g√©n√©rale (simplifi√©e)

* `src/Entity`

  * `User` : utilisateur (admin / client)
  * `Client` : client (YouTubeur)
  * `Order` : commande de miniature
  * `TimeEntry` : temps pass√© sur une commande
  * `OrderAsset` : fichiers / assets fournis par le client
  * `Thumbnail` : miniatures finales
  * `Payment` : paiement li√© √† un utilisateur / client
  * `Invitation` : token d‚Äôinvitation pour cr√©er un compte
  * `YoutubeChannel` : cha√Ænes YouTube li√©es √† un client
* `src/Controller`

  * `HomeController` : dashboard / landing
  * `OrderController`, `ClientController`, `UserController`, etc.
  * `RegistrationController` : inscription + verification email
* `templates/` : vues Twig (dark theme, Bootstrap)

---

## ‚úÖ √âtat actuel (pour le rendu)

* Fonctionnel :

  * Authentification (login / logout)
  * Compte admin via fixtures
  * Gestion des clients, orders, assets, thumbnails
  * Dashboard admin / client
  * Suivi du temps et des statuts de commandes
* Partiellement fonctionnel :

  * Syst√®me d‚Äôinscription + email de v√©rification (**OK en logique**, mais email non fonctionnel en prod).
* √Ä am√©liorer plus tard :

  * Gestion compl√®te des paiements (PayPal/Stripe)
  * Emailing robuste en prod
  * Plus de dashboards / stats

---

```
```
