
# ThumbUp ğŸ¨ğŸ“Š

ThumbUp est un outil interne pour gÃ©rer des **commandes de miniatures YouTube** pour des clients (YouTubeurs) :
- Les **admins** gÃ¨rent les clients, les commandes, le temps passÃ©, les paiementsâ€¦
- Les **clients** peuvent crÃ©er des commandes, uploader des assets, suivre le statut et rÃ©cupÃ©rer leurs miniatures.

> ğŸ”— DÃ©mo en production : https://thumb-up.byevti.com/  
> âš ï¸ En prod, **la confirmation dâ€™email ne fonctionne pas encore** pour la crÃ©ation de compte (les mails ne partent pas).

---

## ğŸ§± Stack technique

- **PHP** â‰¥ 8.2
- **Symfony** 7+
- **Doctrine ORM**
- **Twig**
- **SQLite** en dÃ©veloppement
- **MariaDB/MySQL** en production
- Bundles principaux :
  - symfony/security-bundle
  - symfony/ux (Stimulus, Turbo, Autocomplete, Chart.js)
  - doctrine/doctrine-bundle, doctrine/migrations-bundle
  - liip/imagine-bundle (prÃ©visualisation des images)
  - vich/uploader-bundle (upload de fichiers)

---

## âš™ï¸ FonctionnalitÃ©s principales

- Gestion des **Users** (ROLE_ADMIN / ROLE_CLIENT) et des **Clients**
- Gestion des **Orders** (commandes de miniatures) avec statut (CREATED, ACCEPTED, DOING, DELIVERED, REVISION, FINISHEDâ€¦)
- Upload dâ€™**assets client** (OrderAsset) et de **miniatures finales** (Thumbnail)
- Suivi du **temps passÃ©** par commande (TimeEntry)
- Suivi basique des **paiements** (Payment)
- Invitations clients via **token** pour crÃ©er un compte liÃ© Ã  un Client
- Dashboard admin / client (statuts, derniÃ¨res miniatures, etc.)

---

## ğŸš€ Lancer le projet en dÃ©veloppement

### 1. Cloner le dÃ©pÃ´t

```bash
git clone https://github.com/EvrardThibaud/thumbup.git thumbup
cd thumbup
````

### 2. Installer les dÃ©pendances PHP

```bash
composer install
```

En dev, les dÃ©pendances de debug (profiler, maker, fixturesâ€¦) sont installÃ©es.

### 3. GÃ©nÃ©rer le schÃ©ma + migrations


```bash
php bin/console doctrine:database:create
php bin/console doctrine:migrations:migrate
```

Avec SQLite, la DB sera crÃ©Ã©e automatiquement dans `var/`.

### 5. Charger les DataFixtures

Les fixtures crÃ©ent notamment un compte admin de test.

```bash
php bin/console doctrine:fixtures:load
```

> Identifiants admin crÃ©Ã©s par les fixtures :
>
> * **Email** : `admin@example.com`
> * **Mot de passe** : `adminpass`

### 6. Lancer le serveur de dev

Avec la CLI Symfony (recommandÃ©) :

```bash
symfony server:start
```

Ou avec PHP natif :

```bash
php -S 127.0.0.1:8000 -t public
```

Le site sera alors accessible sur :
ğŸ‘‰ [http://127.0.0.1:8000](http://127.0.0.1:8000)

---

## ğŸ”‘ AccÃ¨s & rÃ´les

### Compte admin (fixtures)

Utilise ces identifiants en dev :

* Email : `admin@example.com`
* Mot de passe : `adminpass`

Lâ€™admin peut :

* voir tous les clients et leurs commandes
* crÃ©er / Ã©diter les commandes
* uploader les miniatures finales
* consulter les paiements / time entries
* gÃ©rer les utilisateurs

---

## ğŸŒ Environnement de production

* URL : [https://thumb-up.byevti.com/](https://thumb-up.byevti.com/)
* Base de donnÃ©es : **MariaDB** (configurÃ©e via `DATABASE_URL` cÃ´tÃ© Infomaniak)
* PHP : 8.3

Limitations actuelles en prod :

* La crÃ©ation de compte fonctionne, mais il est impossible de se connecter car lâ€™email ne peut pas Ãªtre validÃ©.
â†’ Le systÃ¨me de vÃ©rification fonctionne en dÃ©veloppement via Mailtrap, mais pas encore configurÃ© en production (les emails ne sont pas envoyÃ©s).

---

## ğŸ’³ Configuration des paiements PayPal (sandbox)

Le projet utilise lâ€™API **PayPal Orders** en mode **sandbox** pour les paiements.

### 1. CrÃ©er / configurer le compte dÃ©veloppeur

1. Aller sur : [https://developer.paypal.com/tools/sandbox/](https://developer.paypal.com/tools/sandbox/)
2. Se connecter (ou crÃ©er un compte PayPal Developer).
3. CrÃ©er une **application sandbox** pour obtenir :

   * un **Client ID**
   * un **Client Secret**

Ensuite, mettre ces infos dans `.env.local` :

```env
PAYPAL_MODE=sandbox
PAYPAL_CLIENT_ID="..."
PAYPAL_CLIENT_SECRET="..."
```

### 2. CrÃ©er un compte sandbox â€œpayerâ€

Important :
Le compte utilisÃ© dans `PAYPAL_CLIENT_ID` / `PAYPAL_CLIENT_SECRET` correspond au **compte marchand**, câ€™est celui qui **reÃ§oit** lâ€™argent.

Pour tester un vrai paiement :

1. Dans la section **Sandbox > Accounts**, crÃ©er un **compte personnel sandbox** (un faux utilisateur PayPal).
2. Lors du checkout, se connecter avec **ce** faux compte personnel (payer).
3. Le compte marchand (liÃ© au Client ID/Secret) ne doit **pas** Ãªtre le mÃªme que celui qui paie.


---

## âœ‰ï¸ Configuration des emails (validation, reset password, notifications)

Plusieurs fonctionnalitÃ©s reposent sur lâ€™envoi dâ€™emails :

* **Validation dâ€™email** lors de lâ€™inscription
* **Mot de passe oubliÃ©** (reset password)
* **Notification admin** quand une nouvelle commande est crÃ©Ã©e

En dev, tout est pensÃ© pour fonctionner avec **Mailtrap** (sandbox email).

### 1. CrÃ©er un compte Mailtrap

1. Aller sur : [https://mailtrap.io](https://mailtrap.io)
2. CrÃ©er un compte gratuit.
3. Dans lâ€™interface, aller dans la section **Sandbox**.
4. RÃ©cupÃ©rer le **DSN Symfony** proposÃ© (ou les identifiants SMTP).

Ã‡a ressemble Ã  quelque chose comme :

```env
MAILER_DSN="smtp://<USER>:<PASSWORD>@sandbox.smtp.mailtrap.io:2525"
```

(Coller cette ligne dans ton `.env.local`.)

### 2. RÃ©sultat

Une fois `MAILER_DSN` configurÃ© :

* La **validation dâ€™email** Ã  lâ€™inscription fonctionne en dev (le lien de confirmation arrive dans Mailtrap).
* Le **forgot password** pourra aussi envoyer un lien.
* Les notifications dâ€™orders fonctionnent : l'admin reÃ§oit un email dÃ¨s quâ€™un client crÃ©e une nouvelle commande.

---