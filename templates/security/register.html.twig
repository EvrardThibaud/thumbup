{% extends 'base.html.twig' %}
{% block title %}Create your account{% endblock %}

{% block body %}
  <div class="card bg-dark border-0 p-4" style="max-width:680px">
    <h1 class="h4 mb-3">ðŸ‘‹ Create your account</h1>

    {% if invitation %}
      <div class="alert alert-success small">
        This account will be linked to <strong>{{ invitedClient.name }}</strong>.
      </div>
    {% elseif inviteToken %}
      <div class="alert alert-warning small">
        This invitation link is invalid or expired.
      </div>
    {% else %}
      <div class="alert alert-secondary small">
        No invitation detected â€” a new Client will be created for your account.
      </div>
    {% endif %}

    {{ form_start(registrationForm, { attr: { class: 'vstack gap-3 mt-3','data-turbo' : 'false' } }) }}
      <div>
        <label class="form-label">Email</label>
        {{ form_widget(registrationForm.email, { attr: { class: 'form-control rounded-1' } }) }}
        {{ form_errors(registrationForm.email) }}
      </div>

      <div>
        <label class="form-label">Password</label>
        {{ form_widget(registrationForm.plainPassword, { attr: { class: 'form-control rounded-1' } }) }}
        {{ form_errors(registrationForm.plainPassword) }}
      </div>

      {% if registrationForm.clientName is defined %}
        <hr class="text-secondary opacity-25">
        <div>
          <label class="form-label">Client name</label>
          {{ form_widget(registrationForm.clientName, { attr: { class: 'form-control rounded-1' } }) }}
          {{ form_errors(registrationForm.clientName) }}
        </div>
        <div>
          <label class="form-label">Channel URL (optional)</label>
          {{ form_widget(registrationForm.channelUrl, { attr: { class: 'form-control rounded-1' } }) }}
          {{ form_errors(registrationForm.channelUrl) }}
        </div>
      {% endif %}

      <div class="d-flex gap-2">
        <button class="btn btn-primary rounded-1">Create account</button>
        <a class="btn btn-outline-light rounded-1" href="{{ path('app_login') }}">I already have an account</a>
      </div>
    {{ form_end(registrationForm) }}
  </div>
{% endblock %}
