{# templates/client/show.html.twig #}
{% extends 'base.html.twig' %}
{% block title %}Client #{{ client.id }}{% endblock %}

{% block body %}
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h1 class="h1 m-0">👤 {{ client.name }}</h1>
    <div class="d-flex gap-2">
      <a class="btn btn-sm btn-outline-light rounded-1" href="{{ path('app_client_index') }}">← Back to list</a>
      <a class="btn btn-sm btn-outline-light rounded-1" href="{{ path('app_client_edit', {'id': client.id}) }}">✏️ Edit</a>
      <form method="post" action="{{ path('app_client_delete', {'id': client.id}) }}" onsubmit="return confirm('Delete this client?');" class="m-0">
        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ client.id) }}">
        <button class="btn btn-sm btn-danger rounded-1">Delete</button>
      </form>
    </div>
  </div>

  <div class="card bg-dark border-0 p-3">
    <div class="text-secondary small mb-2">client #{{ client.id }}</div>

    {% if client.channelUrl %}
      <div class="mb-3">
        <a class="link-light link-opacity-75-hover" href="{{ client.channelUrl }}" target="_blank">Channel link ↗︎</a>
      </div>
    {% endif %}

    {# Financial summary #}
    <div class="row g-3 mb-2">
      <div class="col-sm-6">
        <div class="text-secondary small">Due (delivered, not paid)</div>
        <div class="fs-5">{{ (dueCents / 100)|number_format(2, ',', ' ') }} €</div>
      </div>
      <div class="col-sm-6">
        <div class="text-secondary small">Paid (info)</div>
        <div class="fs-5">{{ (paidCents / 100)|number_format(2, ',', ' ') }} €</div>
      </div>
    </div>

    {# Optional extra fields #}
    {% if client.contactEmail is defined and client.contactEmail %}
      <div class="mb-2">
        <div class="text-secondary small">Contact</div>
        <div>{{ client.contactEmail }}</div>
      </div>
    {% endif %}

    {% if client.notes is defined and client.notes %}
      <div class="mb-2">
        <div class="text-secondary small">Notes</div>
        <div class="text-secondary" style="white-space: pre-wrap">{{ client.notes }}</div>
      </div>
    {% endif %}
  </div>
{% endblock %}
